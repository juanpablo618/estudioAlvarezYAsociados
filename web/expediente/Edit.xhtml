<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:p="http://primefaces.org/ui">
    <h:head>

        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" />
        <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" rel="stylesheet" />

    </h:head>
    <ui:composition>


        <dialog id="myDialog">Usted está por modificar el nro de Orden para confirmar presione ESC</dialog>

        <script>
            function myFunction() {
                document.getElementById("myDialog").showModal();
            }

            function prepararDescargaReporteFinal(formId) {
                var form = document.getElementById(formId);
                if (!form) {
                    return true;
                }

                var previousTarget = form.getAttribute('target');
                if (previousTarget !== null) {
                    form.dataset.prevTarget = previousTarget;
                } else {
                    delete form.dataset.prevTarget;
                }

                form.target = '_blank';

                window.setTimeout(function () {
                    if (form.dataset.prevTarget) {
                        form.target = form.dataset.prevTarget;
                    } else {
                        form.removeAttribute('target');
                    }
                    delete form.dataset.prevTarget;
                }, 0);

                return true;
            }
        </script>

        <p:dialog id="ExpedienteEditDlg" class="editDialogExpediente" widgetVar="ExpedienteEditDialog" modal="true" resizable="true" appendTo="@(body)" width="100" style="overflow-y:auto" closable="false">
            <h:form id="ExpedienteEditForm" >


                <p:toolbar  id="toolbarexpedientes" >
                    <f:facet name="left" >
                        <h:outputText style="font-size: 21px ;padding: 10px 20px ; background: cornflowerblue ; color: white;border-radius:  5px;" value="#{expedienteController.selected.orden}"/>

                        <div class="nombrecliente">
                            <h:outputText value="#{expedienteController.selected.apellido}" />
                            <h:outputText value=" "/>
                            <h:outputText value="#{expedienteController.selected.nombre}"/>
                            <h:outputText value=" "/>

                            <h:outputText style="font-size: 14px; font-weight: 300; color: #007bff" value="Expediente: #{expedienteController.selected.tipoDeExpediente}"/>
                        </div>



                    </f:facet>
                    <f:facet name="right">

                        <p:commandButton onclick="ExpedienteViewDialog.hide()" actionListener="#{expedienteController.update}" class="boton-guardar" value="#{bundle.Save}"
                                         update=":ExpedienteListForm:datalist" oncomplete="handleSubmit(args, 'ExpedienteEditDialog');"/>

                        <p:commandButton value="Cerrar" 

                                         styleClass="boton-cancelar"
                                         onclick="PF('ExpedienteEditDialog').hide();" 
                                         />
                    </f:facet>

                </p:toolbar>

                <div style="float: left;width: 100%;">   

                    <p:tabView id="tabViewEditExpAdm" orientation="left" styleClass="tabdatospersonales" >
                        <h:panelGroup id="display">

                        </h:panelGroup>

                        <p:tab >
                            <f:facet name="title">

                                <h:outputText id="iconoDatos" 
                                              styleClass="fa fa-user" 
                                              style="font-size: 1.2rem; cursor: pointer;" />
                                <p:tooltip for="iconoDatos" value="Datos Personales" />

                            </f:facet>
                            <div class="datospersonales"> 
                                <div class="columna">
                                    <p:outputLabel value="#{bundle.CreateExpedienteLabel_apellido}" for="apellido"  />
                                    <p:inputText id="apellido" value="#{expedienteController.selected.apellido}" title="#{bundle.CreateExpedienteTitle_apellido}" />

                                    <p:outputLabel value="#{bundle.CreateExpedienteLabel_nombre}" for="nombre"  />
                                    <p:inputText id="nombre" value="#{expedienteController.selected.nombre}"  title="#{bundle.CreateExpedienteTitle_nombre}" />

                                    <p:outputLabel value="#{bundle.CreateExpedienteLabel_cuit}" for="cuit"  />
                                    <p:inputText required="true" requiredMessage="CUIT ES REQUERIDO" id="cuit" value="#{expedienteController.selected.cuit}" title="#{bundle.CreateExpedienteTitle_cuit}" />


                                    <p:outputLabel value="#{bundle.CreateExpedienteLabel_fechaDeNacimiento}" for="fechaDeNacimiento" />
                                    <p:calendar required="true" styleClass="inputfecha" requiredMessage="Fecha de nacimiento es requerido" id="fechaDeNacimiento" pattern="dd/MM/yyyy" value="#{expedienteController.selected.fechaDeNacimiento}" title="#{bundle.EditExpedienteTitle_fechaDeNacimiento}" showOn="button">
                                    </p:calendar>

                                    <p:outputLabel value="Edad:"  style="visibility:hidden"/>
                                    <p:outputLabel value="#{expedienteController.getEdadYComparacion()}"  />

                                    <p:outputLabel value="#{bundle.CreateExpedienteLabel_sexo}" for="sexo" />
                                    <p:selectOneMenu  id="sexo" value="#{expedienteController.selected.sexo}" >
                                        <f:selectItem itemLabel="Masculino" itemValue="masculino" />
                                        <f:selectItem itemLabel="Femenino" itemValue="Femenino" />
                                        <p:ajax update="inputPanelCantHijos" />
                                    </p:selectOneMenu>
                                    <p:outputLabel value="Nacionalidad:" for="nacionalidad" />
                                    <p:selectOneMenu id="nacionalidad" value="#{expedienteController.selected.nacionalidad}"  >
                                        <f:selectItem itemLabel="Argentina" itemValue="Argentina" />
                                        <f:selectItem itemLabel="Extranjero" itemValue="Extranjero" />
                                    </p:selectOneMenu>

                                    <p:outputLabel value="Estado Civil:" for="estadoCivil" />
                                    <p:selectOneMenu id="estadoCivil" value="#{expedienteController.selected.estadoCivil}" >
                                        <f:selectItem itemLabel="SOLTERO" itemValue="SOLTERO" />
                                        <f:selectItem itemLabel="CASADO" itemValue="CASADO" />
                                        <f:selectItem itemLabel="SEPARADO DE HECHO" itemValue="SEPARADO DE HECHO" />
                                        <f:selectItem itemLabel="DIVORCIADO" itemValue="DIVORCIADO" />
                                        <f:selectItem itemLabel="VIUDO" itemValue="VIUDO" />
                                        <p:ajax update="inputDatosDelConyuge" />
                                    </p:selectOneMenu>
                                    <h:panelGrid id="inputDatosDelConyuge" columns="1"
                                                 cellpadding="0"
                                                 style="width:100%; border-collapse:separate;" >
                                        <!-- DATOS CONYUGE -->
                                        <p:outputLabel value="Datos Del conyuge:" rendered="#{expedienteController.selected.estadoCivil == 'CASADO' or expedienteController.selected.estadoCivil == 'SEPARADO DE HECHO' or expedienteController.selected.estadoCivil == 'DIVORCIADO' or expedienteController.selected.estadoCivil == 'VIUDO'}" />
                                        <p:inputTextarea rendered="#{expedienteController.selected.estadoCivil == 'CASADO' or expedienteController.selected.estadoCivil == 'SEPARADO DE HECHO' or expedienteController.selected.estadoCivil == 'DIVORCIADO' or expedienteController.selected.estadoCivil == 'VIUDO'}" value="#{expedienteController.selected.datosDelConyuge}" />
                                    </h:panelGrid>

                                    <h:panelGrid  id="inputPanelCantHijos"
                                                  columns="1"
                                                  cellpadding="0"
                                                  style="width:100%; border-collapse:separate; border-spacing:0 10px;" >
                                        <p:outputLabel value="Número total de Hijos:" rendered="#{expedienteController.selected.sexo == 'Femenino'}" />
                                        <p:inputText rendered="#{expedienteController.selected.sexo == 'Femenino'}" value="#{expedienteController.selected.cantidadDeHijos}" />

                                        <p:outputLabel value="Hijos con discapacidad:" rendered="#{expedienteController.selected.sexo == 'Femenino'}" />
                                        <p:inputText rendered="#{expedienteController.selected.sexo == 'Femenino'}" value="#{expedienteController.selected.cantidadDeHijosConDiscapacidad}" />

                                        <p:outputLabel value="Hijos adoptivos:" rendered="#{expedienteController.selected.sexo == 'Femenino'}" />
                                        <p:inputText    rendered="#{expedienteController.selected.sexo == 'Femenino'}" value="#{expedienteController.selected.cantidadDeHijosAdoptivos}" />

                                        <p:outputLabel value="Hijos por los que percibió AUH:" rendered="#{expedienteController.selected.sexo == 'Femenino'}" />
                                        <p:inputText rendered="#{expedienteController.selected.sexo == 'Femenino'}" value="#{expedienteController.selected.cantidadDeHijosPercibioAuh}" />
                                    </h:panelGrid>
                                </div> 

                                <div class="columna">

                                    <p:outputLabel value="#{bundle.CreateExpedienteLabel_telefono}" for="telefono"  />    

                                    <div class="telefonoinput">
                                        <p:inputText id="telefono" value="#{expedienteController.selected.telefono}" title="#{bundle.CreateExpedienteTitle_telefono}" />



                                        <a class="btnwpp" href="#{expedienteController.abrirWhatsApp(expedienteController.selected.telefono)}" target="_blank" >
                                            <img src="../faces/resources/images/whatsapp.png" ></img>
                                        </a>
                                    </div>
                                    <p:outputLabel value="Teléfono Auxiliar" for="telefonoAuxiliar"  />            
                                    <p:inputTextarea    id="telefonoAuxiliar" value="#{expedienteController.selected.telefonoAuxiliar}" cols="22" title="Telèfono Auxiliar" style="height: 21px;"/>


                                    <p:outputLabel value="Código Postal:" for="codigoPostal" />
                                    <p:inputText id="codigoPostal" value="#{expedienteController.selected.codigoPostal}"  title="codigoPostal"/>


                                    <p:outputLabel value="#{bundle.CreateExpedienteLabel_direccion}" for="direccion" />
                                    <p:inputText id="direccion" value="#{expedienteController.selected.direccion}" title="#{bundle.CreateExpedienteTitle_direccion}" />

                                    <p:outputLabel value="Altura:" for="nroDeAltura"  />
                                    <p:inputText id="nroDeAltura" value="#{expedienteController.selected.nroDeAltura}" title="#{bundle.CreateExpedienteTitle_nroDeAltura}" />

                                    <p:outputLabel value="#{bundle.CreateExpedienteLabel_piso}" for="piso"  />
                                    <p:inputText id="piso" value="#{expedienteController.selected.piso}" title="#{bundle.CreateExpedienteTitle_piso}"  />

                                    <p:outputLabel value="#{bundle.CreateExpedienteLabel_depto}" for="depto" />
                                    <p:inputText id="depto" value="#{expedienteController.selected.depto}"  title="#{bundle.CreateExpedienteTitle_depto}"  />

                                    <p:outputLabel value="#{bundle.CreateExpedienteLabel_barrio}" for="barrio"  />
                                    <p:inputText id="barrio" value="#{expedienteController.selected.barrio}"     title="#{bundle.CreateExpedienteTitle_barrio}" />

                                    <p:outputLabel value="Localidad:" for="localidad"  />
                                    <p:inputText id="localidad" value="#{expedienteController.selected.localidad}" title="localidad"/>

                                </div>

                                <div class="columna">
                                    <p:outputLabel value="Fecha de Atención:" for="fechaDeAtencion"  />
                                    <p:calendar class="inputFechaDeAtencion" id="fechaDeAtencion" styleClass="inputfecha" pattern="dd/MM/yyyy" value="#{expedienteController.selected.fechaDeAtencion}" title="fechaDeAtencion" showOn="button">
                                    </p:calendar>


                                    <p:outputLabel value="Activo:" for="activo"  />
                                    <p:selectOneMenu id="activo" value="#{expedienteController.selected.activo}"  >
                                        <f:selectItem itemLabel=" -- Elige un estado --"  noSelectionOption="true"  />
                                        <f:selectItem itemLabel="Si" itemValue="Si" />
                                        <f:selectItem itemLabel="No" itemValue="No" />
                                    </p:selectOneMenu>
                                    <p:outputLabel  value="Tiene inscripción AUT/MT: " for="inscripcionAut" />
                                    <p:selectOneMenu   id="inscripcionAut" value="#{expedienteController.selected.inscripcionAut}" >
                                        <f:selectItem itemLabel="SI" itemValue="SI" />
                                        <f:selectItem itemLabel="NO" itemValue="NO" />
                                    </p:selectOneMenu>   

                                    <p:outputLabel  value="Posible Reclamo ART: " for="reclamoArt" />
                                    <p:selectOneMenu id="reclamoArt" value="#{expedienteController.selected.reclamoArt}" >
                                        <f:selectItem itemLabel="SI" itemValue="SI" />
                                        <f:selectItem itemLabel="NO" itemValue="NO" />
                                    </p:selectOneMenu>   

                                    <p:outputLabel value="Cobra Beneficio" for="cobraBeneficio"  />
                                    <p:selectOneMenu  id="cobraBeneficio" value="#{expedienteController.selected.cobraBeneficio}" editable="false">
                                        <f:selectItem itemLabel="NO" itemValue="NO" />
                                        <f:selectItem itemLabel="SI" itemValue="SI" />
                                        <p:ajax update="inputTipoDeBeneficio" />
                                    </p:selectOneMenu>

                                    <h:panelGrid id="inputTipoDeBeneficio" columns="1"
                                                 cellpadding="0"
                                                 style="width:100%; border-collapse:separate; ">
                                        <p:outputLabel rendered="#{expedienteController.selected.cobraBeneficio == 'SI'}" value="Tipo de Beneficio:" for="tipoDeBeneficio"  />
                                        <p:inputText rendered="#{expedienteController.selected.cobraBeneficio == 'SI'}" id="tipoDeBeneficio" value="#{expedienteController.selected.tipoDeBeneficio}" title="tipoDeBeneficio"/>

                                    </h:panelGrid>
                                    <p:outputLabel value="Tiene aportes: "   />
                                    <p:selectOneMenu  id="aportes" value="#{expedienteController.selected.aportes}" >
                                        <f:selectItem itemLabel="NO" itemValue="NO" />
                                        <f:selectItem itemLabel="SI" itemValue="SI" />
                                        <p:ajax update="inputAportes" />
                                    </p:selectOneMenu>   

                                    <h:panelGrid id="inputAportes" columns="1"
                                                 cellpadding="0"
                                                 style="width:100%; border-collapse:separate; "  >
                                        <p:outputLabel rendered="#{expedienteController.selected.aportes == 'SI'}" value="detalle de aportes:" for="detalleDeAportes" />
                                        <p:inputTextarea rendered="#{expedienteController.selected.aportes == 'SI'}" rows="5"  autoResize="false"  id="detalleDeAportes" value="#{expedienteController.selected.detalleDeAportes}" title="detalle de aportes"/>

                                        <p:outputLabel rendered="#{expedienteController.selected.aportes == 'SI'}" value="Esta trabajando actualmente? : " for="trabajando" />

                                        <p:selectOneMenu rendered="#{expedienteController.selected.aportes == 'SI'}"  id="trabajando" value="#{expedienteController.selected.trabajando}" >
                                            <f:selectItem itemLabel="NO" itemValue="NO" />
                                            <f:selectItem itemLabel="SI" itemValue="SI" />
                                            <p:ajax update="inputObraSocial" />
                                        </p:selectOneMenu>   

                                    </h:panelGrid  >
                                    <h:panelGrid id="inputObraSocial" columns="1"
                                                 cellpadding="0"
                                                 style="width:100%; border-collapse:separate;">
                                        <p:outputLabel rendered="#{expedienteController.selected.trabajando == 'SI'}" value="Obra social: " for="obraSocial" />
                                        <p:inputText rendered="#{expedienteController.selected.trabajando == 'SI'}" id="obraSocial" value="#{expedienteController.selected.obraSocial}" title="obraSocial"/>

                                    </h:panelGrid>

                                </div>
                                <div  class="columna"> 

                                    <div class="roww1"> 
                                        <div class="imagenentidad">
                                            <a href="https://servicioscorp.anses.gob.ar/clavelogon/logon.aspx?system=miansesv2" target="_blank" >
                                                <img src="../faces/resources/images/anses.png" ></img>
                                            </a>
                                        </div>

                                        <div>

                                            <p:outputLabel value="Clave Seguridad Social" for="claveSeguridadSocial"  />
                                            <p:inputText id="claveSeguridadSocial" value="#{expedienteController.selected.claveSeguridadSocial}" title="clave de seguridad social"/>

                                        </div>
                                    </div>
                                    <div class="roww1"> 
                                        <div class="arca" >
                                            <a href="https://auth.afip.gob.ar/contribuyente_/login.xhtml" target="_blank" >
                                                <img src="../faces/resources/images/arca.jpg"  ></img>
                                            </a>
                                        </div>
                                        <div>


                                            <p:outputLabel value="Clave Fiscal" for="claveFiscal"/>
                                            <p:inputText id="claveFiscal" value="#{expedienteController.selected.claveFiscal}" title="clave Fiscal"/>

                                        </div>

                                    </div>
                                    <div class="roww1">
                                        <div class="imagenentidad">
                                            <a href="https://cidi.cba.gov.ar/Cuenta/Login" target="_blank" >
                                                <img src="../faces/resources/images/CIDI.png"></img>
                                            </a>
                                        </div>
                                        <div>


                                            <p:outputLabel value="Clave CIDI" for="claveCidi"  />
                                            <p:inputText id="claveCidi" value="#{expedienteController.selected.claveCidi}" title="clave Cidi"/>

                                        </div>
                                    </div>
                                </div>
                            </div>
                        </p:tab>
                        <p:tab >
                            <f:facet name="title">

                                <h:outputText id="iconoEXP"  
                                              styleClass="fa fa-folder" 
                                              style="font-size: 1.2rem; cursor: pointer;" />
                                <p:tooltip for="iconoEXP" value="Datos del expediente" />

                            </f:facet>
                            <div class="datosexpediente">
                                <div class="columna">
                                    <p:outputLabel value="Tipo de Expediente"  for="tipoDeExpediente"  class="float-l"/>
                                    <p:selectOneMenu id="tipoDeExpediente"  value="#{expedienteController.selected.tipoDeExpediente}" editable="false" >
                                        <f:selectItem class="subMenu" itemLabel="Administrativo" itemValue="administrativo" />
                                        <f:selectItem class="subMenu" itemLabel="Judicial" itemValue="judicial" />
                                    </p:selectOneMenu>



                                    <p:outputLabel value="Tipo de Tramite:" for="tipoDeTramite"  class="float-l"/>

                                    <p:selectOneMenu  requiredMessage="debe seleccionar un tipo de trámite correcto" id="tipoDeTramite" editable="true" effect="fold" value="#{expedienteController.selected.tipoDeTramite}">
                                        <f:selectItem itemLabel=" -- Elige un típo de trámite --"  noSelectionOption="true"  />
                                        <f:selectItems value="#{tipoDeTramiteController.items}" var="tipoDeTramite" itemLabel="#{tipoDeTramite.estado}" itemValue="#{tipoDeTramite.estado}" />
                                    </p:selectOneMenu>





                                    <p:outputLabel value="Equipo:" for="equipo"  />
                                    <p:selectOneMenu id="equipo" editable="false" effect="fold" value="#{expedienteController.selected.equipo}">
                                        <f:selectItem itemLabel=" -- Elige un equipo --"  noSelectionOption="true"  />
                                        <f:selectItems value="#{equipoController.items}" var="equipo" itemLabel="#{equipo.nombre}" itemValue="#{equipo.nombre}" />
                                    </p:selectOneMenu>

                                </div>
                                <div class="columna">
                                    <p:outputLabel value="Estado del Tramite:"  class="float-l" />
                                    <p:selectOneMenu  id="estadoDelTramite" value="#{expedienteController.selected.estadoDelTramite}">
                                        <f:selectItem itemLabel=" -- Estado del tramite --"  noSelectionOption="true"/>
                                        <f:selectItems value="#{estadoDelTramiteController.items}" var="estado" itemLabel="#{estado.estado}" itemValue="#{estado.estado}" />
                                    </p:selectOneMenu>



                                    <p:outputLabel value="Fecha de cobro:" for="fechaDeCobro"  rendered="#{expedienteController.selected.estadoDelTramite eq 'FECHA DE COBRO.'}" />
                                    <p:calendar disabledWeekends="true" style="width: 112px;" id="fechaDeCobro" pattern="dd/MM/yyyy" value="#{expedienteController.selected.fechaDeCobro}" title="fechaDeCobro" rendered="#{expedienteController.selected.estadoDelTramite eq 'FECHA DE COBRO.'}" />


                                    <p:outputLabel class="float-l" value="Procedencia:" for="procedencia" />
                                    <p:selectOneMenu  id="procedencia" value="#{expedienteController.selected.procedencia}"  >
                                        <f:selectItem itemLabel=" -- Procedencia --"  noSelectionOption="true"/>
                                        <f:selectItems value="#{procedenciaController.itemsAvailableSelectOne}" var="procedencia" itemLabel="#{procedencia.nombreProcedencia}" itemValue="#{procedencia.nombreProcedencia}" />
                                    </p:selectOneMenu>

                                    <p:outputLabel class="float-l" value="Responsable:" for="responsable" />

                                    <p:selectOneMenu  requiredMessage="debe seleccionar un responsable correcto" id="responsable" value="#{expedienteController.selected.responsable}">
                                        <f:selectItem itemLabel=" -- Elige un Responsable --"  noSelectionOption="true"  />
                                        <f:selectItems value="#{empleadoController.items}" var="empleado" itemLabel="#{empleado.nombreyApellido}" itemValue="#{empleado.nombreyApellido}" />
                                    </p:selectOneMenu>


                                    <p:outputLabel class="float-l" value="Apoderado:" for="apoderado"/>
                                    <p:selectOneMenu  requiredMessage="debe seleccionar un apoderado correcto" id="apoderado" value="#{expedienteController.selected.apoderado}">
                                        <f:selectItem itemLabel=" -- Elige un Apoderado --"  noSelectionOption="true"  />
                                        <f:selectItem itemLabel="Mateo Francisco Alvarez" itemValue="Mateo Francisco Alvarez" />
                                        <f:selectItem itemLabel="María Emilia Campos" itemValue="María Emilia Campos" />
                                    </p:selectOneMenu>
                                </div>
                                <div class="columna">
                                    <p:outputLabel class="float-l" value="Observaciones:" for="observaciones" />
                                    <p:inputTextarea  rows="10" cols="25" autoResize="false"  id="observaciones" value="#{expedienteController.selected.observaciones}" title="observaciones"/>


                                    <h:commandButton onclick="form.target = '_blank';" value="Imprimir Carátula" styleClass="boton-imprimir" actionListener="#{downloadBean.crearPdfDeCaratula(expedienteController.selected.nombre, expedienteController.selected.apellido, expedienteController.selected.dni, expedienteController.selected.direccion,
                                                                                                                                                               expedienteController.selected.nroDeAltura, expedienteController.selected.barrio,
                                                                                                                                                               expedienteController.selected.apoderado,
                                                                                                                                                               expedienteController.selected.fechaDeAtencion,
                                                                                                                                                               expedienteController.selected.sexo,
                                                                                                                                                               expedienteController.selected.telefono,
                                                                                                                                                               expedienteController.selected.cuit,
                                                                                                                                                               expedienteController.selected.fechaDeNacimiento,
                                                                                                                                                               expedienteController.selected.edad, 
                                                                                                                                                               expedienteController.selected.cobraBeneficio,
                                                                                                                                                               expedienteController.selected.tipoDeBeneficio,
                                                                                                                                                               expedienteController.selected.aportes,
                                                                                                                                                               expedienteController.selected.trabajando,
                                                                                                                                                               expedienteController.selected.inscripcionAut,
                                                                                                                                                               expedienteController.selected.estadoCivil,
                                                                                                                                                               expedienteController.selected.cantidadDeHijos,
                                                                                                                                                               expedienteController.selected.obraSocial,
                                                                                                                                                               expedienteController.selected.claveCidi,
                                                                                                                                                               expedienteController.selected.claveFiscal,
                                                                                                                                                               expedienteController.selected.claveSeguridadSocial
                                                                                                                                                               )}" />


                                </div>
                            </div>
                        </p:tab>

                        <p:tab id="tabComunicaciones" >
                            <f:facet name="title">
                                <h:outputText id="iconoComunicaciones"  styleClass="fa fa-comments" style="font-size: 1.2rem; cursor: pointer;" />
                                <p:tooltip for="iconoComunicaciones" value="Comunicaciones" />
                            </f:facet>

                            <div class="comunicaciones">

                                <div style="text-align: right ; padding-bottom: 20px ;display: grid;" >
                                    <p:commandButton  class="botonEditarAgendaEsteBotonNoSirveMasPeroLoNecesitaLaUI boton-guardar"
                                                      actionListener="#{comunicacionController.prepareCreateComunicacion(expedienteController.selected.orden)}"  value="crear comunicación" 
                                                      update=":ComunicacionCreateFormExpAdm" oncomplete="PF('ComunicacionCreateDialogExpAdm').show()" />
                                </div>     

                                <p:dataTable id="datalist4"
                                             value="#{expedienteController.verComunicacionesPorNroDeOrden(expedienteController.selected.orden)}" var="item"
                                             selectionMode="single" selection="#{comunicacionController.selected}"
                                             rowKey="#{item.idComunicacion}"
                                             paginator="true"
                                             rows="10"
                                             widgetVar="comunicacionesTable2"
                                             rowsPerPageTemplate="10,20,50"
                                             emptyMessage="no hay comunicaciones agregadas" 
                                             rendered="true"  
                                             style="display: table;"
                                             styleClass="tabla-tailwind"
                                             sortBy="#{item.fecha}" sortOrder="descending" 
                                             >

                                    <p:ajax event="rowSelect"  />
                                    <p:ajax event="rowUnselect" />

                                    <p:column  sortBy="#{item.fecha}" headerText="Fecha"  style="width: 8%" >
                                        <h:outputText value="#{item.fecha}" styleClass="fechacolumna"  >
                                            <f:convertDateTime pattern="dd/MM/yyyy" />

                                        </h:outputText>
                                    </p:column>
                                    <p:column   styleClass="centeredColumnContent" headerText="Descripción" style="width:63%;">
                                        <div class="apilarelementos">


                                            <h:outputText value="#{item.descripcion}"  title="#{item.descripcion}"/>
                                        </div>
                                    </p:column>

                                    <p:column  headerText="Responsable"  class="iconoturnorespondable"  >
                                        <div style="display:flex;justify-content: center">
                                            <h:outputText id="responsableicon"  
                                                          value="#{expedienteController.getIniciales(item.responsable)}"
                                                          style="color:white; border-radius:50%; width:28px; height:28px;
                                                          display:flex; align-items:center; justify-content:center;
                                                          font-size:0.8rem;
                                                          font-weight: 500 !important;
                                                          background-color: #{expedienteController.getColor(item.responsable)};" />
                                            <p:tooltip for="responsableicon" value="#{item.responsable}" />
                                        </div>
                                    </p:column>

                                    <p:column   exportable="false">

                                        <f:facet name="header">
                                            <h:outputText value="Acciones"/>
                                        </f:facet>

                                        <p:commandButton class="linea btnSearch"  update=":ComunicacionEditForm" oncomplete="PF('ComunicacionEditDialog').show()"  icon="ui-icon-search"  title="Editar comunicación">
                                            <f:setPropertyActionListener value="#{item}" target="#{comunicacionController.selected}" />
                                        </p:commandButton>

                                        <p:commandButton class="linea btnDelete" update=":growl,datalist4" oncomplete="PF('expedientesTable').clearFilters()" actionListener="#{comunicacionController.destroy}"  icon="ui-icon-trash" title="Eliminar">
                                            <f:setPropertyActionListener value="#{item}" target="#{comunicacionController.selected}" />
                                            <p:confirm header="Confirmación" message="¿Estas seguro?"  icon="ui-icon-alert"/>
                                        </p:commandButton> 

                                    </p:column>    

                                </p:dataTable>

                                <p:confirmDialog  global="true" showEffect="fade" hideEffect="fade">
                                    <p:commandButton update=":ExpedienteListForm" value="Si" type="button" styleClass="ui-confirmdialog-yes ui-state-default" icon="ui-icon-check" style="color: black;" />
                                    <p:commandButton update=":ExpedienteListForm" value="No" type="button" styleClass="ui-confirmdialog-no ui-state-error-text" icon="ui-icon-close" style="color: black;" />
                                </p:confirmDialog> 

                            </div>
                        </p:tab>

                        <p:tab id="tabAgendaAnterior" >
                            <f:facet name="title">
                                <h:outputText id="iconoAgendas"  styleClass="fa fa-calendar" style="font-size: 1.2rem; cursor: pointer;" />
                                <p:tooltip for="iconoAgendas" value="Agendas y Turnos" />
                            </f:facet>
                            <div class="agendasyturnos">

                                <p:commandButton id="createButtonTurno"
                                                 class="boton-guardar hoverBlue "
                                                 value="Crear Turno" 
                                                 actionListener="#{turnoController.prepareCreate}"
                                                 update=":ExpedienteViewFormParaTurno,:growl"
                                                 oncomplete="PF('ExpedienteViewDialogParaTurno').show(); PF('ExpedienteEditDialog').show()" />

                                <p:commandButton id="createButtonAgenda"
                                                 class="boton-sistema hoverBlue" style="margin-right: 10px !important;
                                                 margin-left: 10px;"
                                                 value="Crear Agenda" 
                                                 actionListener="#{agendaController.prepareCreate}"
                                                 update=":ExpedienteViewFormParaAgenda,:growl"
                                                 oncomplete="PF('ExpedienteViewDialogParaAgenda').show(); PF('ExpedienteEditDialog').show()" />
                                <p:commandButton
                                    id="createButtonAgendasMasivas"
                                    class="boton-agenda-masiva"  style="margin-left: 10px;"
                                    value="Crear Agendas Masivas" 
                                    actionListener="#{agendaController.prepareCreateAgendasMasivas}"
                                    update=":ExpedienteViewFormParaAgendaMasiva,:growl"
                                    oncomplete="PF('ExpedienteViewDialogParaAgendasMasivas').show(); PF('ExpedienteEditDialog').show()" />


                                <p:fieldset class="tablashistorial" legend="AGENDAS ANTERIORES" toggleable="true"  collapsed="true" toggleSpeed="500">
                                    <p:dataTable id="datalist3" 
                                                 value="#{expedienteController.verAgendasPasadasPorNroDeOrden(expedienteController.selected.orden)}"
                                                 var="item"
                                                 selectionMode="single"
                                                 selection="#{agendaController.selectedAgendaPasada}"
                                                 rowKey="#{item.idAgenda}"
                                                 paginator="true"
                                                 rendered="true"
                                                 rows="10"
                                                 rowsPerPageTemplate="10,20,40,50"
                                                 emptyMessage="no hay agendas Pasadas agregadas" 
                                                 filteredValue="#{expedienteController.filteredAgendasAnteriores}"
                                                 style="display: table;padding: 20px"
                                                 styleClass="tabla-tailwind"
                                                 >
                                        <p:ajax event="rowSelect"  />
                                        <p:ajax event="rowUnselect" />
                                        <p:growl life="5000" id="message3"  showDetail="true" />

                                        <p:column style="width:55%"   headerText="Descripción" >
                                            <div class="apilarelementos">
                                                <h:outputText value="#{item.descripcion}"  title="#{item.descripcion}"/>
                                            </div>
                                        </p:column>
                                        <p:column  headerText="Responsable"  class="iconoturnorespondable"  >
                                            <div style="display:flex;justify-content: center">
                                                <h:outputText id="responsableicon"  
                                                              value="#{expedienteController.getIniciales(item.responsable)}"
                                                              style="color:white; border-radius:50%; width:28px; height:28px;
                                                              display:flex; align-items:center; justify-content:center;
                                                              font-size:0.8rem;
                                                              font-weight: 500 !important;
                                                              background-color: #{expedienteController.getColor(item.responsable)};" />
                                                <p:tooltip for="responsableicon" value="#{item.responsable}" />
                                            </div>
                                        </p:column>
                                        <p:column  headerText="Estado">
                                            <div class="apilarelementos">
                                                <h:outputText value="#{item.realizado eq 'Si' ? 'Finalizada' : (item.realizado eq 'Reagendada' ? 'Reagendada' : 'Por Atender')}" styleClass="estadofinalizado#{item.realizado}" />
                                                <h:outputText value="#{item.fecha}" styleClass="fechacolumna"  >
                                                    <f:convertDateTime pattern="dd/MM/yyyy" />

                                                </h:outputText>
                                            </div>
                                        </p:column>

                                        <p:column  style="text-align: center; width:15%; " headerText="Acciones">

                                            <p:commandButton class="linea btnSearch"
                                                             update=":AgendaPasadaEditForm"
                                                             oncomplete="PF('AgendaPasadaEditDialog').show()" icon="ui-icon-search" title="Ver">
                                                <f:setPropertyActionListener value="#{item}" target="#{agendaController.selectedAgendaPasada}" />
                                            </p:commandButton>

                                            <p:commandButton class="linea btnKeyGreen"
                                                             update=":ExpedienteEditForm:tabViewEditExpAdm:datalist3" 
                                                             actionListener="#{agendaController.marcarComoRealizadaSiAgendaPasada()}"
                                                             icon=" ui-icon-check" title="Marcar como realizado si">
                                                <f:setPropertyActionListener value="#{item}" target="#{agendaController.selectedAgendaPasada}" />
                                            </p:commandButton>

                                            <p:commandButton class="linea btnDelete"
                                                             update=":ExpedienteEditForm:tabViewEditExpAdm:datalist3, message3" 
                                                             actionListener="#{agendaController.destroyAgendaPasada()}"  icon="ui-icon-trash" title="Eliminar">
                                                <f:setPropertyActionListener value="#{item}" target="#{agendaController.selectedAgendaPasada}" />
                                                <p:confirm header="Confirmación" message="¿Estas seguro?" icon="ui-icon-alert"/>
                                            </p:commandButton>

                                            <p:confirmDialog  global="true" showEffect="fade" hideEffect="fade">
                                                <p:commandButton   update=":ExpedienteEditForm:tabViewEditExpAdm:datalist3"  value="Si" type="button" styleClass="ui-confirmdialog-yes ui-state-default" icon="ui-icon-check" style="color: black;"/>
                                                <p:commandButton update="@all" value="No" type="button" styleClass="ui-confirmdialog-no ui-state-error-text" icon="ui-icon-close" style="color: black;"/>
                                            </p:confirmDialog> 
                                        </p:column>

                                    </p:dataTable>
                                </p:fieldset>
                                <p:fieldset class="tablashistorial" legend="TURNOS ANTERIORES" toggleable="true"  collapsed="true" toggleSpeed="500">
                                    <p:dataTable id="datalistTurnosAnteriores" 
                                                 value="#{expedienteController.verTurnosPasadosPorNroDeOrden(expedienteController.selected.orden)}"
                                                 var="item"
                                                 selectionMode="single"
                                                 selection="#{turnoController.selectedTurnoPasado}"
                                                 rowKey="#{item.idTurno}"
                                                 paginator="true"    
                                                 rendered="true"
                                                 rows="10"
                                                 rowsPerPageTemplate="10,20,40,50"
                                                 emptyMessage="no hay turnos Pasados agregados" 
                                                 filteredValue="#{expedienteController.filteredTurnosAnteriores}"
                                                 style="display: table;padding: 20px"
                                                 styleClass="tabla-tailwind"
                                                 >
                                        <p:ajax event="rowSelect"  />
                                        <p:ajax event="rowUnselect" />
                                        <p:growl life="5000" id="message3"  showDetail="true" />

                                        <p:column style="text-align: start !important ; width: 60%">
                                            <f:facet name="header">
                                                <h:outputText value="Descripción"/>
                                            </f:facet>
                                            <h:outputText value="#{item.observacion}"/>
                                        </p:column>

                                        <p:column filterBy="#{item.realizado}"  filterMatchMode="exact" headerText="Realizado">
                                            <f:facet name="filter">
                                                <p:selectOneMenu onchange="PF('tablaTurnosAnteriores').filter()">
                                                    <f:selectItem itemLabel="Todos" itemValue="" />
                                                    <f:selectItem itemLabel="Sí" itemValue="SI" />
                                                    <f:selectItem itemLabel="No" itemValue="NO" />
                                                    <f:selectItem itemLabel="Pendiente" itemValue="Pendiente" />
                                                </p:selectOneMenu>
                                            </f:facet>
                                            <div class="apilarelementos"> 
                                                <h:outputText value="#{item.realizado eq 'Si' ? 'Realizado' : (item.realizado eq 'Pendiente' ? 'Pendiente' : 'Por Atender')}" styleClass="estadofinalizado#{item.realizado}" />

                                                <h:outputText  value="#{item.horaYDia}" styleClass="fechacolumna" >
                                                    <f:convertDateTime pattern="dd/MM/yyyy HH:mm" />
                                                </h:outputText>
                                            </div> 
                                        </p:column>
                                        <p:column filterBy="#{item.responsable}" headerText="Responsable"  filterMatchMode="contains" style="width:10%" class="iconoturnorespondable" >

                                            <div style="display:flex;justify-content: center">
                                                <h:outputText id="responsableicon"  
                                                              value="#{expedienteController.getIniciales(item.responsable)}"
                                                              style="color:white; border-radius:50%; width:28px; height:28px;
                                                              display:flex; align-items:center; justify-content:center;
                                                              font-size:0.8rem;
                                                              font-weight: 500 !important;
                                                              background-color: #{expedienteController.getColor(item.responsable)};" />
                                                <p:tooltip for="responsableicon" value="#{item.responsable}" />
                                            </div>

                                        </p:column>

                                        <p:column  style="text-align: center; width: 10%" headerText="Acciones">

                                            <p:commandButton class="linea btnKeyGreen"
                                                             update=":ExpedienteEditForm:tabViewEditExpAdm:datalistTurnosAnteriores" 
                                                             actionListener="#{turnoController.marcarComoRealizadoSiTurnoPasado()}"
                                                             icon=" ui-icon-check" title="Marcar como realizado si">
                                                <f:setPropertyActionListener value="#{item}" target="#{turnoController.selectedTurnoPasado}" />
                                            </p:commandButton>

                                            <p:commandButton class="linea btnDelete"
                                                             update=":ExpedienteEditForm:tabViewEditExpAdm:datalistTurnosAnteriores, message3" 
                                                             actionListener="#{turnoController.destroyTurnoPasado()}"  icon="ui-icon-trash" title="Eliminar">
                                                <f:setPropertyActionListener value="#{item}" target="#{turnoController.selectedTurnoPasado}" />
                                                <p:confirm header="Confirmación" message="¿Estas seguro?" icon="ui-icon-alert"/>
                                            </p:commandButton>

                                            <p:confirmDialog  global="true" showEffect="fade" hideEffect="fade">
                                                <p:commandButton   update=":ExpedienteEditForm:tabViewEditExpAdm:datalistTurnosAnteriores"  value="Si" type="button" styleClass="ui-confirmdialog-yes ui-state-default" icon="ui-icon-check" style="color: black;"/>
                                                <p:commandButton update="@all" value="No" type="button" styleClass="ui-confirmdialog-no ui-state-error-text" icon="ui-icon-close" style="color: black;"/>
                                            </p:confirmDialog> 
                                        </p:column>

                                    </p:dataTable>
                                </p:fieldset>

                                <p:fieldset class="tablashistorial" legend="AGENDAS FUTURAS" toggleable="true"  collapsed="true" toggleSpeed="500">

                                    <p:dataTable id="datalist2" 
                                                 value="#{expedienteController.verAgendasFuturasPorNroDeOrden(expedienteController.selected.orden)}" 
                                                 var="item"
                                                 selectionMode="single"
                                                 selection="#{agendaController.selectedAgendaFutura}"
                                                 rowKey="#{item.idAgenda}"
                                                 paginator="true"
                                                 rows="10"
                                                 rendered="true"
                                                 rowsPerPageTemplate="10,20,40,50"
                                                 emptyMessage="no hay agendas futuras agregadas" 
                                                 filteredValue="#{expedienteController.filteredAgendasFuturas}"
                                                 style="display: table;padding: 20px"
                                                 styleClass="tabla-tailwind"
                                                 >
                                        <p:ajax event="rowSelect"  />
                                        <p:ajax event="rowUnselect" />
                                        <p:growl life="5000" id="message4" showDetail="true" />

                                        <p:column style="width:55%"   headerText="Descripción" >
                                            <div class="apilarelementos">


                                                <h:outputText value="#{item.descripcion}"  title="#{item.descripcion}"/>
                                            </div>
                                        </p:column>
                                        <p:column  headerText="Responsable"  class="iconoturnorespondable"  >
                                            <div style="display:flex;justify-content: center">
                                                <h:outputText id="responsableicon"  
                                                              value="#{expedienteController.getIniciales(item.responsable)}"
                                                              style="color:white; border-radius:50%; width:28px; height:28px;
                                                              display:flex; align-items:center; justify-content:center;
                                                              font-size:0.8rem;
                                                              font-weight: 500 !important;
                                                              background-color: #{expedienteController.getColor(item.responsable)};" />
                                                <p:tooltip for="responsableicon" value="#{item.responsable}" />
                                            </div>
                                        </p:column>
                                        <p:column  headerText="Estado">
                                            <div class="apilarelementos">
                                                <h:outputText value="#{item.realizado eq 'Si' ? 'Finalizada' : (item.realizado eq 'Reagendada' ? 'Reagendada' : 'Por Atender')}" styleClass="estadofinalizado#{item.realizado}" />
                                                <h:outputText value="#{item.fecha}" styleClass="fechacolumna"  >
                                                    <f:convertDateTime pattern="dd/MM/yyyy" />

                                                </h:outputText>
                                            </div>
                                        </p:column>
                                        <p:column  style="text-align: center; width:15%; " headerText="Acciones">


                                            <p:commandButton class="linea btnSearch"  update=":AgendaFuturaEditForm" oncomplete="PF('AgendaFuturaEditDialog').show()" icon="ui-icon-search" title="Ver">
                                                <f:setPropertyActionListener value="#{item}" target="#{agendaController.selectedAgendaFutura}" />
                                            </p:commandButton>

                                            <p:commandButton class="linea btnKeyGreen"
                                                             update=":growl,:ExpedienteEditForm:tabViewEditExpAdm:datalist2"
                                                             actionListener="#{agendaController.marcarComoRealizadaSiAgendaFutura()}" icon=" ui-icon-check" title="Marcar como realizado si">
                                                <f:setPropertyActionListener value="#{item}" target="#{agendaController.selectedAgendaFutura}" />
                                            </p:commandButton>

                                            <p:commandButton class="linea btnDelete"
                                                             update=":growl,:ExpedienteEditForm:tabViewEditExpAdm:datalist2, message4"
                                                             actionListener="#{agendaController.destroyAgendaFutura()}"  icon="ui-icon-trash" title="Eliminar">
                                                <f:setPropertyActionListener value="#{item}" target="#{agendaController.selectedAgendaFutura}" />
                                                <p:confirm header="Confirmación" message="¿Estas seguro?" icon="ui-icon-alert"/>
                                            </p:commandButton>

                                            <p:confirmDialog  global="true" showEffect="fade" hideEffect="fade">
                                                <p:commandButton   update=":ExpedienteEditForm:tabViewEditExpAdm:datalist2" 
                                                                   value="Si" type="button" styleClass="ui-confirmdialog-yes ui-state-default" icon="ui-icon-check" style="color: black;"/>
                                                <p:commandButton update="@all" value="No" type="button" styleClass="ui-confirmdialog-no ui-state-error-text" icon="ui-icon-close" style="color: black;"/>
                                            </p:confirmDialog> 
                                        </p:column>
                                    </p:dataTable>
                                </p:fieldset>
                                <p:fieldset class="tablashistorial" legend="TURNOS FUTUROS" toggleable="true"  collapsed="true" toggleSpeed="500">

                                    <p:dataTable id="datalistTurnosFuturos" 
                                                 value="#{expedienteController.verTurnosFuturosPorNroDeOrden(expedienteController.selected.orden)}" 
                                                 var="item"
                                                 selectionMode="single"
                                                 selection="#{turnoController.selectedTurnoFuturo}"
                                                 rowKey="#{item.idTurno}"
                                                 paginator="true"
                                                 rows="10"
                                                 rendered="true"
                                                 rowsPerPageTemplate="10,20,40,50"
                                                 emptyMessage="no hay turnos futuros agregados" 
                                                 filteredValue="#{expedienteController.filteredTurnosFuturos}"
                                                 style="display: table;padding: 20px"
                                                 styleClass="tabla-tailwind"
                                                 >

                                        <p:ajax event="rowSelect"  />
                                        <p:ajax event="rowUnselect" />
                                        <p:growl life="5000" id="message4" showDetail="true" />

                                        <p:column style="text-align: start !important; width: 60%">
                                            <f:facet name="header">
                                                <h:outputText value="Descripción"/>
                                            </f:facet>
                                            <h:outputText value="#{item.observacion}"/>
                                        </p:column>

                                        <p:column filterBy="#{item.realizado}"  filterMatchMode="exact" headerText="Realizado">
                                            <f:facet name="filter">
                                                <p:selectOneMenu onchange="PF('tablaTurnosFuturos').filter()">
                                                    <f:selectItem itemLabel="Todos" itemValue="" />
                                                    <f:selectItem itemLabel="Sí" itemValue="SI" />
                                                    <f:selectItem itemLabel="No" itemValue="NO" />
                                                    <f:selectItem itemLabel="Pendiente" itemValue="Pendiente" />
                                                </p:selectOneMenu>
                                            </f:facet>
                                            <div class="apilarelementos"> 
                                                <h:outputText value="#{item.realizado eq 'Si' ? 'Realizado' : (item.realizado eq 'Pendiente' ? 'Pendiente' : 'Por Atender')}" styleClass="estadofinalizado#{item.realizado}" />

                                                <h:outputText  value="#{item.horaYDia}" styleClass="fechacolumna" >
                                                    <f:convertDateTime pattern="dd/MM/yyyy HH:mm" />
                                                </h:outputText>
                                            </div> 
                                        </p:column>
                                        <p:column filterBy="#{item.responsable}" headerText="Responsable"  filterMatchMode="contains" style="width:10%" class="iconoturnorespondable" >

                                            <div style="display:flex;justify-content: center">
                                                <h:outputText id="responsableicon"  
                                                              value="#{expedienteController.getIniciales(item.responsable)}"
                                                              style="color:white; border-radius:50%; width:28px; height:28px;
                                                              display:flex; align-items:center; justify-content:center;
                                                              font-size:0.8rem;
                                                              font-weight: 500 !important;
                                                              background-color: #{expedienteController.getColor(item.responsable)};" />
                                                <p:tooltip for="responsableicon" value="#{item.responsable}" />
                                            </div>
                                        </p:column>

                                        <p:column  style="text-align: center; width: 10%" headerText="Acciones">

                                            <p:commandButton class="linea btnKeyGreen"
                                                             update=":ExpedienteEditForm:tabViewEditExpAdm:datalistTurnosFuturos" 
                                                             actionListener="#{turnoController.marcarComoRealizadoSiTurnoFuturo()}"
                                                             icon=" ui-icon-check" title="Marcar como realizado si">
                                                <f:setPropertyActionListener value="#{item}" target="#{turnoController.selectedTurnoFuturo}" />
                                            </p:commandButton>

                                            <p:commandButton class="linea btnDelete"
                                                             update=":ExpedienteEditForm:tabViewEditExpAdm:datalistTurnosFuturos, message4" 
                                                             actionListener="#{turnoController.destroyTurnoFuturo()}"  icon="ui-icon-trash" title="Eliminar">
                                                <f:setPropertyActionListener value="#{item}" target="#{turnoController.selectedTurnoFuturo}" />
                                                <p:confirm header="Confirmación" message="¿Estas seguro?" icon="ui-icon-alert"/>
                                            </p:commandButton>

                                            <p:confirmDialog  global="true" showEffect="fade" hideEffect="fade">
                                                <p:commandButton   update=":ExpedienteEditForm:tabViewEditExpAdm:datalistTurnosFuturos"  value="Si" type="button" styleClass="ui-confirmdialog-yes ui-state-default" icon="ui-icon-check" style="color: black;"/>
                                                <p:commandButton update="@all" value="No" type="button" styleClass="ui-confirmdialog-no ui-state-error-text" icon="ui-icon-close" style="color: black;"/>
                                            </p:confirmDialog> 
                                        </p:column>

                                    </p:dataTable>
                                </p:fieldset>
                            </div>
                        </p:tab>
                        <p:tab  id="honorarios">
                            <f:facet name="title">
                                <h:outputText id="iconoHonorarios"  styleClass="fas fa-coins" style="font-size: 1.2rem; cursor: pointer;" />

                                <p:tooltip for="iconoHonorarios" value="Honorarios y Gastos" />
                            </f:facet>
                            <div class="honorarios">
                                <div style="display:flex; flex-direction: column ;gap: 10px;">

                                    <p:outputLabel value="convenio de honorarios" style="font-weight: bold" for="convenioDeHonorarios" />
                                    <p:selectOneMenu  id="convenioDeHonorarios" value="#{expedienteController.selected.convenioDeHonorarios}" editable="true" effect="fold" >
                                        <f:selectItem itemLabel="1 haber" itemValue="1 haber" />
                                        <f:selectItem itemLabel="2 haberes" itemValue="2 haberes" />
                                        <f:selectItem itemLabel="2 haberes y 20% retroactivo" itemValue="2 haberes y 20% retroactivo" />
                                        <f:selectItem itemLabel="2 haberes y 30% retroactivo" itemValue="2 haberes y 30% retroactivo" />
                                        <f:selectItem itemLabel="3 haberes" itemValue="3 haberes" />
                                        <f:selectItem itemLabel="20% retroactivo" itemValue="20% retroactivo" />
                                        <f:selectItem itemLabel="25% retroactivo" itemValue="25% retroactivo" />
                                    </p:selectOneMenu>
                                    <h:commandButton value="Imprimir Convenio" styleClass="boton-imprimir" actionListener="#{downloadBean.crearConvenioDeHonorarios(expedienteController.selected.nombre, expedienteController.selected.apellido, expedienteController.selected.dni, expedienteController.selected.direccion, expedienteController.selected.nroDeAltura, expedienteController.selected.barrio)}" />

                                </div>

                                <div style="display:flex; flex-direction: column ;gap: 10px; align-items: flex-start;">
                                    <p:outputLabel value="Firmado" for="poderFirmado" style="font-weight: bold" />
                                    <p:selectOneRadio id="poderFirmado" value="#{expedienteController.selected.poderFirmado}" layout="pageDirection">

                                        <f:selectItem itemLabel="Sí" itemValue="Si" />
                                        <f:selectItem itemLabel="No" itemValue="No" />
                                    </p:selectOneRadio>

                                </div>
                            </div>
                            <div class="editordetexto">
                                <p:editor  value="#{expedienteController.selected.tablaDeHonorariosYGastos}"></p:editor>
                            </div>  
                        </p:tab>

                        <p:tab >
                            <f:facet name="title">
                                <h:outputText id="iconosp"  styleClass="fas fa-clock" style="font-size: 1.2rem; cursor: pointer;" />

                                <p:tooltip for="iconosp" value="Situación Previsional" />
                            </f:facet>
                            <div class="comunicaciones">

                                <p:commandButton  class="botonEditarAgendaEsteBotonNoSirveMasPeroLoNecesitaLaUI boton-guardar" style="margin-bottom: 20px;"
                                                  actionListener="#{situacionPrevisionalController.prepareCreateSituacionPrevisional(expedienteController.selected.orden)}"  value="crear situación previsional" 
                                                  update=":SituacionPrevisionalCreateFormExpAdm" oncomplete="PF('SituacionPrevisionalCreateDialogExpAdm').show()" />
                                <p:dataTable id="datalistSituacionPrevisional"
                                             value="#{situacionPrevisionalController.verSituacionPrevisionalesPorNroDeOrden(expedienteController.selected.orden)}"
                                             var="item"
                                             selectionMode="single"
                                             selection="#{situacionPrevisionalController.selected}"
                                             rowKey="#{item.idSituacionPrevisional}"
                                             paginator="true"
                                             rows="10"
                                             rendered="true"
                                             rowsPerPageTemplate="10,20,50"
                                             emptyMessage="no hay situaciones previsionales agregadas" 
                                             style="display: table;padding: 20px"
                                             styleClass="tabla-tailwind"
                                             >

                                    <p:ajax event="rowSelect"  />
                                    <p:ajax event="rowUnselect" />

                                    <p:column  style="width: 40%" styleClass="centeredColumnContent" headerText="Empleador">
                                        <h:outputText value="#{item.empleador}"  />
                                    </p:column>
                                    <p:column headerText="Empleador">
                                        <p:cellEditor>
                                            <f:facet name="input"><p:inputText value="#{item.empleador}" /></f:facet>
                                            <f:facet name="output"><h:outputText value="#{item.empleador}" /></f:facet>
                                        </p:cellEditor>
                                    </p:column>
                                    <p:column sortBy="#{item.fechaInicio}" style="width: 20%" styleClass="centeredColumnContent"  headerText="FECHA Inicio">
                                        <h:outputText value="#{item.fechaInicio}"  >
                                            <f:convertDateTime pattern="dd/MM/yyyy" />
                                        </h:outputText>
                                    </p:column>
                                    <p:column sortBy="#{item.fechaFin}" style="width: 20%" styleClass="centeredColumnContent"  headerText="FECHA Fin">
                                        <h:outputText value="#{item.fechaFin}"  >
                                            <f:convertDateTime pattern="dd/MM/yyyy" />
                                        </h:outputText>
                                    </p:column>
                                    <p:column  style="width: 20%" styleClass="centeredColumnContent" headerText="cant. Años">
                                        <h:outputText value="#{item.anios}"  />
                                    </p:column>
                                    <p:column  style="width: 20%" styleClass="centeredColumnContent" headerText="cant. Meses">
                                        <h:outputText value="#{item.meses}"  />
                                    </p:column>
                                    <p:column  style="width: 20%" styleClass="centeredColumnContent" headerText="cant. días">
                                        <h:outputText value="#{item.dias}"  />
                                    </p:column>
                                    <p:column  style="width: 40%" styleClass="centeredColumnContent" headerText="Observaciones">
                                        <h:outputText value="#{item.observaciones}"  />
                                    </p:column>
                                    <p:column  style="width: 20%" styleClass="centeredColumnContent" headerText="Acciones">

                                        <p:commandButton class="linea btnDelete" update=":growl,datalistSituacionPrevisional" oncomplete="PF('expedientesTable').clearFilters()" actionListener="#{situacionPrevisionalController.destroy}"  icon="ui-icon-trash" title="Eliminar">
                                            <f:setPropertyActionListener value="#{item}" target="#{situacionPrevisionalController.selected}" />
                                        </p:commandButton> 

                                    </p:column>

                                </p:dataTable>

                                <br></br>

                                <div class="opcion-moratoria-24476" style="margin: 10px 0 0 10px; display: flex; align-items: center; gap: 12px;">
                                    <p:selectBooleanCheckbox id="btnCompraLey24476"
                                                             value="#{situacionPrevisionalController.compraAportesConMoratoriaLey24476}">
                                        <p:ajax update="panelCodigoEvaluacionSocioeconomica"/>
                                    </p:selectBooleanCheckbox>

                                    <h:outputLabel for="btnCompraLey24476" 
                                                   value="Compra aportes con moratoria Ley 24.476" />
                                </div>

                                <h:panelGroup id="panelCodigoEvaluacionSocioeconomica"
                                              layout="block"
                                              rendered="#{situacionPrevisionalController.compraAportesConMoratoriaLey24476}"
                                              style="margin: 5px 0 15px 10px;">
                                    <p:outputLabel for="codigoEvaluacionSocioeconomica" value="Código evaluación socioeconómica" style="margin-right: 10px" />
                                    <p:inputText id="codigoEvaluacionSocioeconomica"
                                                 value="#{situacionPrevisionalController.codigoEvaluacionSocioeconomica}"
                                                 placeholder="codigo evaluación socioeconómica"
                                                 style="width: 320px;"
                                                 autocomplete="off"/>
                                </h:panelGroup>

                                <div class="opcion-aportes-futuros" style="margin: 10px 0 20px 10px; display: flex; align-items: center; gap: 8px;">
                                    <p:selectBooleanCheckbox id="chkAportesFuturos"
                                                             value="#{situacionPrevisionalController.incluirAportesFuturosHastaEdadLegal}" />
                                    <h:outputLabel for="chkAportesFuturos" value="Incluir aportes futuros hasta la edad legal" />
                                </div>

                                <p:commandButton value="Reporte final"
                                                 actionListener="#{situacionPrevisionalController.generarReporteIntegralFinal(
                                                                   expedienteController.selected.orden,
                                                                   expedienteController.selected.fechaDeNacimiento,
                                                                   expedienteController.selected.sexo,
                                                                   expedienteController.selected.cantidadDeHijos,
                                                                   expedienteController.selected.cantidadDeHijosAdoptivos,
                                                                   expedienteController.selected.cantidadDeHijosConDiscapacidad,
                                                                   expedienteController.selected.cantidadDeHijosPercibioAuh)}"
                                                 update="panelTotalTiempoConAportes"
                                                 icon="ui-icon-refresh"
                                                 styleClass="botonRefrescar boton-cancelar" style="margin-left:10px;margin-bottom:  10px !important;" />



                                <p:commandButton value="Imprimir reporte final" type="button" icon="pi pi-print" styleClass="botonRefrescar boton-cancelar" style="margin-left:10px;margin-bottom:  10px !important;">
                                    <p:printer target="panelTotalTiempoConAportes"/>
                                </p:commandButton>

                                <h:panelGroup id="panelTotalTiempoConAportes">
                                    <p:inputTextarea readonly="true"
                                                     autoResize="true"
                                                     style="margin-left:10px;margin-right: 10px !important;"
                                                     rows="20"
                                                     value="#{empty situacionPrevisionalController.totalTiempoConAportes 
                                                              ? '' 
                                                              : situacionPrevisionalController.totalTiempoConAportes.trim()}" />
                                </h:panelGroup>


                            </div>
                        </p:tab>  
                    </p:tabView>
                </div>
            </h:form>    
        </p:dialog>

        <ui:include src="../comunicacion/CreateComunicacionParaExpAdministrativo.xhtml"/>
        <ui:include src="../situacionPrevisional/CreateSituacionPrevisionalParaExpAdministrativo.xhtml"/>

        <ui:include src="../comunicacion/Edit.xhtml"/>
        <ui:include src="../agenda/EditAgendaPasada.xhtml"/>
        <ui:include src="../agenda/EditAgendaFutura.xhtml"/>

    </ui:composition>
</html>