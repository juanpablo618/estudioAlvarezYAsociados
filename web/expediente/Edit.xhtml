<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:p="http://primefaces.org/ui">

    <ui:composition>
      
        <p:dialog id="ExpedienteEditDlg" class="editDialogExpediente" widgetVar="ExpedienteEditDialog" modal="true" resizable="false" appendTo="@(body)" >
            <h:form id="ExpedienteEditForm">
                <h:panelGroup id="display">

                </h:panelGroup >
                
                <div style="font-weight: bold; float: left">
                <h:outputText value="#{expedienteController.selected.apellido}" />
                    <h:outputText value=" "/>
                    <h:outputText value="#{expedienteController.selected.nombre}"/>
                    <h:outputText value=" "/>
                    <h:outputText value="#{expedienteController.selected.orden}"/>
                </div>
                
                    <br></br><br></br>
                
                <div style="float: left">   

                    <p:tabView style="width: 160%">

                        <p:tab title="Datos personales">

                            <p:outputLabel value="Orden:"  style="font-weight: bold" /><br></br>
                            <p:inputText id="orden" value="#{expedienteController.selected.orden}" title="#{bundle.EditExpedienteTitle_orden}" />

                            <br></br><br></br>

                            <div>
                                <div  style="float: left"> 

                                    <p:outputLabel value="#{bundle.CreateExpedienteLabel_apellido}" for="apellido" style="font-weight: bold" />
                                    <br></br> 
                                    <p:inputText id="apellido" value="#{expedienteController.selected.apellido}" title="#{bundle.CreateExpedienteTitle_apellido}" />

                                </div> 
                                <div >

                                    <p:outputLabel value="#{bundle.CreateExpedienteLabel_nombre}" for="nombre" style="margin-left: 3%;font-weight: bold" />
                                    <br></br> 
                                    <p:inputText id="nombre" value="#{expedienteController.selected.nombre}" style="margin-left: 3%" title="#{bundle.CreateExpedienteTitle_nombre}" />

                                </div> 
                            </div> 
                            <br></br><br></br>
                            <div>
                                <div style="float: left">

                                    <p:outputLabel value="#{bundle.CreateExpedienteLabel_cuit}" for="cuit" style="font-weight: bold" />
                                    <br></br>
                                    <p:inputText id="cuit" value="#{expedienteController.selected.cuit}" title="#{bundle.CreateExpedienteTitle_cuit}" />

                                </div>
                                <div>   

                                    <p:outputLabel value="#{bundle.CreateExpedienteLabel_telefono}" for="telefono" style="margin-left: 3%;font-weight: bold" />
                                    <br></br>       
                                    <p:inputText id="telefono" value="#{expedienteController.selected.telefono}" style="margin-left: 3%" title="#{bundle.CreateExpedienteTitle_telefono}" />


                                </div>
                            </div> 

                            <br></br><br></br>
                            <div>
                                <div style="float: left">

                                    <p:outputLabel value="#{bundle.CreateExpedienteLabel_fechaDeNacimiento}" style="font-weight: bold" for="fechaDeNacimiento" />
                                    <br></br>

                                    <p:calendar id="fechaDeNacimiento" pattern="dd/MM/yyyy" value="#{expedienteController.selected.fechaDeNacimiento}" title="#{bundle.EditExpedienteTitle_fechaDeNacimiento}" showOn="button">
                                    </p:calendar>

                                </div>
                                <div >
                                    <p:outputLabel value="#{bundle.CreateExpedienteLabel_sexo}" for="sexo" style="margin-left: 3%;font-weight: bold" /><br></br>
                                    <p:selectOneMenu style="margin-left: 3%" id="sexo" value="#{expedienteController.selected.sexo}" >
                                        <f:selectItem itemLabel="Masculino" itemValue="masculino" />
                                        <f:selectItem itemLabel="Femenino" itemValue="Femenino" />
                                    </p:selectOneMenu><br></br><br></br>


                                    <p:outputLabel value="Nacionalidad:" for="nacionalidad" style="margin-left: 3%;font-weight: bold" /><br></br>

                                    <p:selectOneMenu id="nacionalidad" value="#{expedienteController.selected.nacionalidad}" style="margin-left: 3%" >
                                        <f:selectItem itemLabel="Argentina" itemValue="Argentina" />
                                        <f:selectItem itemLabel="Extranjero" itemValue="Extranjero" />
                                    </p:selectOneMenu><br></br>
                                </div>
                            </div>  
                            <br></br>

                            <div>    
                                <div style="float: left">

                                    <p:outputLabel value="#{bundle.CreateExpedienteLabel_direccion}" for="direccion" style="font-weight: bold" /><br></br>
                                    <p:inputText id="direccion" value="#{expedienteController.selected.direccion}" title="#{bundle.CreateExpedienteTitle_direccion}" /><br></br>

                                    <br></br>                    
                                    <p:outputLabel value="Altura:" for="nroDeAltura" style="font-weight: bold" /><br></br>
                                    <p:inputText id="nroDeAltura" value="#{expedienteController.selected.nroDeAltura}" title="#{bundle.CreateExpedienteTitle_nroDeAltura}" />

                                </div>
                                <div style="float: left">
                                    <p:outputLabel value="#{bundle.CreateExpedienteLabel_piso}" for="piso" style="margin-left: 3%;font-weight: bold" /><br></br>
                                    <p:inputText id="piso" value="#{expedienteController.selected.piso}" style="margin-left: 3%" title="#{bundle.CreateExpedienteTitle_piso}"  />

                                </div>
                                <div>
                                    <p:outputLabel value="#{bundle.CreateExpedienteLabel_depto}" for="depto" style="margin-left: 3%;font-weight: bold"/><br></br>
                                    <p:inputText id="depto" value="#{expedienteController.selected.depto}" style="margin-left: 3%" title="#{bundle.CreateExpedienteTitle_depto}"  />

                                </div> <br></br>    
                                <div style="float: left">
                                    <p:outputLabel value="#{bundle.CreateExpedienteLabel_barrio}" for="barrio" style="margin-left: 3%;font-weight: bold" /><br></br>
                                    <p:inputText id="barrio" value="#{expedienteController.selected.barrio}" style="margin-left: 3%" title="#{bundle.CreateExpedienteTitle_barrio}" />

                                </div>
                                <div>

                                    <p:outputLabel value="Código Postal:" for="codigoPostal" style="margin-left: 3%;font-weight: bold" /><br></br>
                                    <p:inputText id="codigoPostal" value="#{expedienteController.selected.codigoPostal}" style="margin-left: 3%" title="codigoPostal"/>


                                </div><br></br>
                                <div style="float: left">

                                    <p:outputLabel value="Localidad:" for="localidad" style="margin-left: 3%;font-weight: bold" /><br></br>
                                    <p:inputText id="localidad" value="#{expedienteController.selected.localidad}" style="margin-left: 3%"  title="localidad"/>

                                </div>
                                <br></br>
                            </div>            

                            <br></br>

                        </p:tab>

                        <p:tab title="claves">

                            
                                <div>
                                    <p:outputLabel value="C. Seguridad Social" for="claveSeguridadSocial" style="font-weight: bold" /><br></br>
                                    <p:inputText id="claveSeguridadSocial" value="#{expedienteController.selected.claveSeguridadSocial}" title="clave de seguridad social"/><br></br>
                                    <p:button value="ir al sitio" href="https://servicioscorp.anses.gob.ar/clavelogon/logon.aspx?system=mianses" target="_blank" />

                                </div>
                            <br></br>
                            <div>
                                <p:outputLabel value="C. Fiscal" for="claveFiscal" style="font-weight: bold" /><br></br>
                                <p:inputText id="claveFiscal" value="#{expedienteController.selected.claveFiscal}" title="clave Fiscal"/><br></br>
                                <p:button  value="Ir al sitio"  href="https://auth.afip.gob.ar/contribuyente_/login.xhtml" target="_blank" />
                                
                            </div>
                            <br></br>
                            <div>
                                <p:outputLabel value="C. Cidi" for="claveCidi" style="font-weight: bold" /><br></br>
                                <p:inputText id="claveCidi" value="#{expedienteController.selected.claveCidi}" title="clave Cidi"/><br></br>
                                <p:button  value="Ir al sitio"  href="https://cidi.cba.gov.ar/Cuenta/Login" target="_blank" />
                               
                            </div>
                            
                            <br></br>
                            <br></br>
                        </p:tab>
                        
                        <p:tab title="Documentos">

                             <div>
                                 <h:commandButton value="Imprimir Convenio" style=" padding: .3em 1em; margin-right: .1em;" actionListener="#{downloadBean.crearConvenioDeHonorarios(expedienteController.selected.nombre, expedienteController.selected.apellido, expedienteController.selected.dni, expedienteController.selected.direccion, expedienteController.selected.nroDeAltura, expedienteController.selected.barrio)}" />
                
                                    <p:commandButton value="C. de Aportes" ajax="false">
                                        <p:fileDownload value="#{fileBean.createExcel(expedienteController.selected.fechaDeNacimiento, expedienteController.selected.sexo, expedienteController.selected.nroDeExpediente, expedienteController.selected.nombre, expedienteController.selected.apellido)}"/>
                                    </p:commandButton>
                             </div>
                            
                            <br></br>
                            <div>
                                <p:commandButton value="Carta Poder" ajax="false">
                                    <p:fileDownload value="#{fileBean.file}"/>
                                </p:commandButton>

                            </div>
                            <br></br>
                            <div>
                               <p:commandButton value="Solicitud de prestaciones previsionales" ajax="false">
                                        <p:fileDownload value="#{fileBean.file2}"/>
                                    </p:commandButton>

                            </div>
                            
                            <br></br>
                            <br></br>
                        </p:tab>

                    </p:tabView>

                </div>

                <div style="float: right; width: 38%"> 

                    <div>
                        <p:fieldset legend="PRÓXIMA AGENDA" toggleable="true" toggleSpeed="500">
                            <p:outputLabel value="#{expedienteController.verProximaAgenda(expedienteController.selected.orden)}" style="font-weight: bold" /><br></br>
                        </p:fieldset>
                    </div>
                    <div>
                        <p:commandButton id="createButton" value="crear Agenda" actionListener="#{agendaController.prepareCreate}"  update=":ExpedienteViewFormParaAgenda" oncomplete="PF('ExpedienteViewDialogParaAgenda').show(); PF('ExpedienteEditDlg').hide()" />
                    </div>
                    
                    <br></br>
                        <p:outputLabel value="Tipo de expediente" style="font-weight: bold" for="tipoDeExpediente"  /><br></br>
                        <p:inputText id="tipoDeExpediente" value="#{expedienteController.selected.tipoDeExpediente}" title="tipoDeExpediente" /><br></br>
                    <br></br> 

                    <div style="float: left; width: 50%">

                        <p:outputLabel value="Fecha de atención:" for="fechaDeAtencion" style="font-weight: bold" /><br></br>
                        <p:calendar style="width: 100px" class="inputFechaDeAtencion" id="fechaDeAtencion" pattern="dd/MM/yyyy" value="#{expedienteController.selected.fechaDeAtencion}" title="fechaDeAtencion">
                        </p:calendar>
                        
                    </div>
                    <br></br>
                    <br></br>
                    <br></br>
                    <div style="width: 50%"> 
                        <div>
                            
                            <p:outputLabel value="Tipo de tramite:" for="tipoDeTramite" style="margin-left: 3%;font-weight: bold" /><br></br>

                            <p:selectOneMenu style="margin-left: 3%" id="tipoDeTramite" value="#{expedienteController.selected.tipoDeTramite}" editable="true" effect="fold" >
                                <f:selectItem itemLabel="Jubilación Ordinaria" itemValue="Jubilación Ordinaria" />
                                <f:selectItem itemLabel="Reconocimiento de Servicios" itemValue="Reconocimiento de Servicios" />
                                <f:selectItem itemLabel="RTI" itemValue="RTI" />
                                <f:selectItem itemLabel="Pensión Directa" itemValue="Pensión Directa" />
                                <f:selectItem itemLabel="Reajuste" itemValue="Reajuste" />
                                <f:selectItem itemLabel="Amparo" itemValue="Amparo" />
                            </p:selectOneMenu>
                        </div>
                        
                    </div>
                    <br></br>

                    <p:outputLabel value="Estado del Tramite:" style="font-weight: bold" />

                    <p:selectOneMenu  id="estadoDelTramite" value="#{expedienteController.selected.estadoDelTramite}">
                        <f:selectItem itemLabel=" -- Estado del tramite --"  noSelectionOption="true"/>
                        <f:selectItems value="#{estadoDelTramiteController.items}" var="estado" itemLabel="#{estado.estado}" itemValue="#{estado.estado}" />
                    </p:selectOneMenu>

                    <br></br><br></br>
                    <div>
                        <div style="float: left" >
                            <p:outputLabel value="Fecha de cobro:" for="fechaDeCobro" style="font-weight: bold" rendered="#{expedienteController.selected.estadoDelTramite eq 'RESUELTO FAVORABLE'}" /><br></br>
                            <p:calendar style="width: 112px;" id="fechaDeCobro" pattern="dd/MM/yyyy" value="#{expedienteController.selected.fechaDeCobro}" title="fechaDeCobro" rendered="#{expedienteController.selected.estadoDelTramite eq 'RESUELTO FAVORABLE'}" />
                        </div>
                        <div>
                            <p:outputLabel value="Cobra Beneficio" for="cobraBeneficio" style="margin-left: 3%;font-weight: bold" /><br></br>

                            <p:selectOneMenu style="margin-left: 3%" id="cobraBeneficio" value="#{expedienteController.selected.cobraBeneficio}" >
                                <f:selectItem itemLabel="Si Jubilación" itemValue="Si Jubilación" />
                                <f:selectItem itemLabel="Si Pensión" itemValue="Si Pensión" />

                                <f:selectItem itemLabel="No" itemValue="No" />
                            </p:selectOneMenu>

                        </div>
                        <br></br>
                        <div>
                            <p:outputLabel value="convenio de honorarios" style="font-weight: bold" for="convenioDeHonorarios" /><br></br>
                            
                            <p:selectOneMenu style="margin-left: 3%" id="convenioDeHonorarios" value="#{expedienteController.selected.convenioDeHonorarios}" editable="true" effect="fold" >
                                <f:selectItem itemLabel="1 haber" itemValue="1 haber" />
                                <f:selectItem itemLabel="2 haberes" itemValue="2 haberes" />
                                <f:selectItem itemLabel="2 haberes y 20% retroactivo" itemValue="2 haberes y 20% retroactivo" />
                                <f:selectItem itemLabel="2 haberes y 30% retroactivo" itemValue="2 haberes y 30% retroactivo" />
                                <f:selectItem itemLabel="3 haberes" itemValue="3 haberes" />
                                <f:selectItem itemLabel="20% retroactivo" itemValue="20% retroactivo" />
                                <f:selectItem itemLabel="25% retroactivo" itemValue="25% retroactivo" />
                            </p:selectOneMenu>
                        
                        </div>
                    </div>
                    <br></br>

                    <p:outputLabel value="Procedencia:" for="procedencia" style="font-weight: bold" /><br></br>
                    <p:selectOneMenu  id="procedencia" value="#{expedienteController.selected.procedencia}"  >
                        <f:selectItems value="#{procedenciaController.itemsAvailableSelectOne}" var="procedencia" itemLabel="#{procedencia.nombreProcedencia}" itemValue="#{procedencia.nombreProcedencia}" />
                    </p:selectOneMenu>

                    <br></br><br></br>
                    <p:outputLabel value="Observaciones:" for="observaciones" style="font-weight: bold"/><br></br>
                    <p:inputTextarea rows="5" cols="53" autoResize="false"  id="observaciones" value="#{expedienteController.selected.observaciones}" title="observaciones"/>

                    <br></br>     
                    <p:commandButton value="#{bundle.Cancel}" onclick="ExpedienteEditDialog.hide()"/>
                    <p:commandButton onclick="ExpedienteViewDialog.hide()" actionListener="#{expedienteController.update}" class="botonCrearAgenda" value="#{bundle.Save}" update="display,:ExpedienteListForm:datalist,:growl" oncomplete="handleSubmit(args, 'ExpedienteEditDialog');"/>
                   
                </div>

                <br></br>

            </h:form>
        </p:dialog>
                
    </ui:composition>
</html>